# kubac configuration file
# Generated by: kubac init
# Version: 0.1.0

# Cluster profile: local, managed, onprem
clusterProfile: local

# Installation mode: gitops or direct
mode: direct

# GitOps configuration (when mode=gitops)
gitops:
  provider: flux
  repoURL: ""
  branch: main
  path: clusters/my-cluster

# Platform components to install
platform:
  # Metrics (required)
  metricsServer:
    enabled: true
    version: v0.7.0

  kubeStateMetrics:
    enabled: true
    version: v2.10.1

  # Monitoring (optional)
  prometheusStack:
    enabled: false
    version: v55.5.0

  # Ingress (optional)
  ingress:
    enabled: false
    provider: nginx
    version: v1.9.5

  # Cert Manager (optional)
  certManager:
    enabled: false
    version: v1.13.3

# Policy engine
policy:
  enabled: true
  provider: kyverno
  version: v1.11.4

  # Pod Security Standards enforcement
  podSecurityStandard: restricted

  # Custom policies
  customPolicies:
    - require-non-root-user
    - require-ro-rootfs
    - disallow-privileged

# Network policies
networkPolicy:
  enabled: true
  defaultDeny: true

  # Allow rules for system namespaces
  systemNamespaces:
    - kube-system
    - kube-public
    - kubac-system

# Autoscaling
autoscaling:
  # HPA configuration
  hpa:
    enabled: true

  # Node autoscaling (only for managed clusters)
  nodeAutoscaler:
    enabled: false
    provider: cluster-autoscaler
    version: v1.29.0

# Demo application
demo:
  namespace: kubac-demo
  replicas: 2
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

  hpa:
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilization: 50

  pdb:
    minAvailable: 1

# Verification settings
verify:
  timeout: 300s
  parallel: true
  tests:
    - pod-selfheal
    - hpa-scale
    - policy-deny
    - network-deny
